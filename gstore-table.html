<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>列表视图 - 知识图谱管理系统 Powered by gStore</title>

    <!-- Bootstrap Styles-->
    <link href="assets/css/bootstrap.css" rel="stylesheet" />
    <!-- FontAwesome Styles-->
    <link href="assets/css/font-awesome.css" rel="stylesheet" />
    <!-- Morris Chart Styles-->

    <!-- Custom Styles-->
    <link href="assets/css/custom-styles.css" rel="stylesheet" />
    <!-- Google Fonts-->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
    <!-- TABLE STYLES-->
    <link href="assets/js/dataTables/dataTables.bootstrap.css" rel="stylesheet" />
</head>

<body>
    <div id="wrapper">
        <nav class="navbar navbar-default top-navbar" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">gStore</a>
            </div>
        </nav>
        <!--/. NAV TOP  -->

        <nav class="navbar-default navbar-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav" id="main-menu">
                    <li>
                        <a href="gstore-dashboard.html"><i class="fa fa-fw fa-file"></i> 控制面板 </a>
                    </li>
                    <li>
                        <a href="gstore-table.html" class="active-menu"><i class="fa fa-fw fa-file"></i> 列表视图 </a>
                    </li>
                </ul>
            </div>
        </nav>
        <!-- /. NAV SIDE  -->

        <div id="page-wrapper">
            <div id="page-inner">

                <div class="row">
                    <div class="col-md-12">
                        <h3 class="page-header">
                            数据集：adb2
                        </h3>
                    </div>
                </div>
                <!-- /. ROW  -->

                <div class="row">
                    <div class="col-xs-12">
                        <div class="panel panel-default panel-table">

                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col col-sm-6">
                                        <h3 class="panel-title">知识元列表</h3>
                                    </div>
                                    <div class="col col-sm-6 text-right">
                                        <button class="btn btn-info btn-sm btn-create" data-title="Delete" data-toggle="modal" data-target="#insert"><span class="glyphicon glyphicon-plus-sign"></span> <span>新建</span> </button>
                                        <button class="btn btn-info btn-sm btn-filter" id="my-btn-filter"><span class="glyphicon glyphicon-filter"></span> <span>筛选</span> </button>
                                    </div>
                                </div>
                            </div>
                            <!-- /. PANEL HEADING  -->

                            <div class="panel-body">
                                <table id="mytable" class="table table-bordered table-striped table-hover">
                                    <thead>
                                        <tr id="tr-input">
                                            <td id="td-input1">名称</td>
                                            <td id="td-input2">简介</td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td><strong>名称</strong></td>
                                            <td><strong>简介</strong></td>
                                            <td align="center"><strong>编辑</strong></td>
                                            <td align="center"><strong>删除</strong></td>
                                        </tr>
                                    </thead>

                                    <tbody id="mytbody">

                                        <tr>
                                            <td>Mohsin1</td>
                                            <td>CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan</td>
                                            <td align="center"><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal"
                                                    data-target="#edit" data-id="1"><span class="glyphicon glyphicon-pencil"></span></button></td>
                                            <td align="center"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal"
                                                    data-target="#delete" data-id="1"><span class="glyphicon glyphicon-trash"></span></button></td>
                                        </tr>

                                        <tr>
                                            <td>Mohsin2</td>
                                            <td>CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan</td>
                                            <td align="center"><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal"
                                                    data-target="#edit" data-id="2"><span class="glyphicon glyphicon-pencil"></span></button></td>
                                            <td align="center"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal"
                                                    data-target="#delete" data-id="2"><span class="glyphicon glyphicon-trash"></span></button></td>
                                        </tr>


                                        <tr>
                                            <td>Irshad3</td>
                                            <td>isometric.mohsin@gmail.com</td>
                                            <td align="center"><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal"
                                                    data-target="#edit" data-id="3"><span class="glyphicon glyphicon-pencil"></span></button></td>
                                            <td align="center"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal"
                                                    data-target="#delete" data-id="3"><span class="glyphicon glyphicon-trash"></span></button></td>
                                        </tr>

                                        <tr>
                                            <td>Mohsin4</td>
                                            <td>+923335586757</td>
                                            <td align="center"><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal"
                                                    data-target="#edit" data-id="4"><span class="glyphicon glyphicon-pencil"></span></button></td>
                                            <td align="center"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal"
                                                    data-target="#delete" data-id="4"><span class="glyphicon glyphicon-trash"></span></button></td>
                                        </tr>


                                        <tr>
                                            <td>Mohsin5</td>
                                            <td>CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan</td>
                                            <td align="center"><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal"
                                                    data-target="#edit" data-id="5"><span class="glyphicon glyphicon-pencil"></span></button></td>
                                            <td align="center"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal"
                                                    data-target="#delete" data-id="5"><span class="glyphicon glyphicon-trash"></span></button></td>
                                        </tr>

                                        <tr>
                                            <td>Mohsin6</td>
                                            <td>CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan</td>
                                            <td align="center"><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal"
                                                    data-target="#edit" data-id="6"><span class="glyphicon glyphicon-pencil"></span></button></td>
                                            <td align="center"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal"
                                                    data-target="#delete" data-id="6"><span class="glyphicon glyphicon-trash"></span></button></td>
                                        </tr>

                                        <tr>
                                            <td>Mohsin7</td>
                                            <td>CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan</td>
                                            <td align="center"><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal"
                                                    data-target="#edit" data-id="7"><span class="glyphicon glyphicon-pencil"></span></button></td>
                                            <td align="center"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal"
                                                    data-target="#delete" data-id="7"><span class="glyphicon glyphicon-trash"></span></button></td>
                                        </tr>

                                        <tr>
                                            <td>Mohsin8</td>
                                            <td>CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan</td>
                                            <td align="center"><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal"
                                                    data-target="#edit" data-id="8"><span class="glyphicon glyphicon-pencil"></span></button></td>
                                            <td align="center"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal"
                                                    data-target="#delete" data-id="8"><span class="glyphicon glyphicon-trash"></span></button></td>
                                        </tr>

                                        <tr>
                                            <td>Mohsin9</td>
                                            <td>CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan</td>
                                            <td align="center"><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal"
                                                    data-target="#edit" data-id="9"><span class="glyphicon glyphicon-pencil"></span></button></td>
                                            <td align="center"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal"
                                                    data-target="#delete" data-id="9"><span class="glyphicon glyphicon-trash"></span></button></td>
                                        </tr>

                                        <tr>
                                            <td>Mohsin10</td>
                                            <td>CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan</td>
                                            <td align="center"><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal"
                                                    data-target="#edit" data-id="10"><span class="glyphicon glyphicon-pencil"></span></button></td>
                                            <td align="center"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal"
                                                    data-target="#delete" data-id="10"><span class="glyphicon glyphicon-trash"></span></button></td>
                                        </tr>

                                        <tr>
                                            <td>Mohsin11</td>
                                            <td>CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan</td>
                                            <td align="center"><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal"
                                                    data-target="#edit" data-id="11"><span class="glyphicon glyphicon-pencil"></span></button></td>
                                            <td align="center"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal"
                                                    data-target="#delete" data-id="11"><span class="glyphicon glyphicon-trash"></span></button></td>
                                        </tr>

                                        <tr>
                                            <td>Mohsin12</td>
                                            <td>CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan</td>
                                            <td align="center"><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal"
                                                    data-target="#edit" data-id="12"><span class="glyphicon glyphicon-pencil"></span></button></td>
                                            <td align="center"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal"
                                                    data-target="#delete" data-id="12"><span class="glyphicon glyphicon-trash"></span></button></td>
                                        </tr>

                                        <tr>
                                            <td>Mohsin13</td>
                                            <td>CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan</td>
                                            <td align="center"><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal"
                                                    data-target="#edit" data-id="13"><span class="glyphicon glyphicon-pencil"></span></button></td>
                                            <td align="center"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal"
                                                    data-target="#delete" data-id="13"><span class="glyphicon glyphicon-trash"></span></button></td>
                                        </tr>

                                        <tr>
                                            <td>Mohsin14</td>
                                            <td>CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan</td>
                                            <td align="center"><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal"
                                                    data-target="#edit" data-id="14"><span class="glyphicon glyphicon-pencil"></span></button></td>
                                            <td align="center"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal"
                                                    data-target="#delete" data-id="14"><span class="glyphicon glyphicon-trash"></span></button></td>
                                        </tr>

                                        <tr>
                                            <td>Mohsin15</td>
                                            <td>CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan</td>
                                            <td align="center"><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal"
                                                    data-target="#edit" data-id="15"><span class="glyphicon glyphicon-pencil"></span></button></td>
                                            <td align="center"><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal"
                                                    data-target="#delete" data-id="15"><span class="glyphicon glyphicon-trash"></span></button></td>
                                        </tr>

                                    </tbody>

                                </table>

                            </div>
                            <!-- /. PANEL BODY  -->

                            <!--<div class="panel-footer">
                                <div class="row">
                                    <div class="col col-xs-4">Page 1 of 5</div>
                                    <div class="col col-xs-12">
                                        <ul class="pagination hidden-xs pull-right">
                                            <li class="disabled"><a href="#"><span class="glyphicon glyphicon-chevron-left"></span></a></li>
                                            <li class="active"><a href="#">1</a></li>
                                            <li><a href="#">2</a></li>
                                            <li><a href="#">3</a></li>
                                            <li><a href="#">4</a></li>
                                            <li><a href="#">5</a></li>
                                            <li><a href="#"><span class="glyphicon glyphicon-chevron-right"></span></a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>-->
                            <!-- /. PANEL FOOTER  -->

                        </div>
                        <!-- /. PANEL TABLE  -->


                        <div class="modal fade" id="insert" tabindex="-1" role="dialog" aria-labelledby="insert" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">

                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-insert" aria-hidden="true"></span></button>
                                        <h4 class="modal-title custom_align" id="Heading">新建知识元</h4>
                                    </div>

                                    <div class="modal-body">
                                        <div class="form-group">
                                            <label class="control-label" for="insert-title">名称</label>
                                            <input id="insert-title" class="form-control " type="text" placeholder="名称不能为空">
                                            <!-- disabled -->
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label" for="insert-description">简介</label>
                                            <textarea id="insert-description" rows="3" class="form-control" placeholder="在这里填写知识元简介"></textarea>
                                        </div>
                                    </div>

                                    <div class="modal-footer ">
                                        <button type="button" class="btn btn-warning btn-lg" id="confirm-insert" data-dismiss="modal" style="width: 100%;"><span class="glyphicon glyphicon-ok-sign"></span> 新建</button>
                                    </div>
                                </div>
                                <!-- /.modal-content -->
                            </div>
                            <!-- /.modal-dialog -->
                        </div>



                        <div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">

                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                                        <h4 class="modal-title custom_align" id="Heading">编辑知识元</h4>
                                    </div>

                                    <div class="modal-body">
                                        <div class="form-group">
                                            <label class="control-label" for="edit-title">名称</label>
                                            <input id="edit-title" class="form-control " type="text" placeholder="Title">
                                            <!-- disabled -->
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label" for="edit-description">简介</label>
                                            <textarea id="edit-description" rows="3" class="form-control" placeholder="Descrition"></textarea>
                                        </div>
                                    </div>

                                    <div class="modal-footer ">
                                        <button type="button" class="btn btn-warning btn-lg" id="confirm-update" data-dismiss="modal" style="width: 100%;"><span class="glyphicon glyphicon-ok-sign"></span> 更新</button>
                                    </div>
                                </div>
                                <!-- /.modal-content -->
                            </div>
                            <!-- /.modal-dialog -->
                        </div>



                        <div class="modal fade" id="delete" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">

                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                                        <h4 class="modal-title custom_align" id="Heading">删除知识元</h4>
                                    </div>

                                    <div class="modal-body">

                                        <div class="alert alert-danger"><span class="glyphicon glyphicon-warning-sign"></span> 即将删除这条知识元，确定吗？</div>
                                        <div>
                                            <p id="dp-title">null</p>
                                        </div>
                                    </div>

                                    <div class="modal-footer ">
                                        <button type="button" class="btn btn-success" id="confirm-delete" data-dismiss="modal"><span class="glyphicon glyphicon-ok-sign"></span> 是</button>
                                        <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> 否</button>
                                    </div>
                                </div>
                                <!-- /.modal-content -->
                            </div>
                            <!-- /.modal-dialog -->
                        </div>

                    </div>
                    <!-- /. ROW  -->
                </div>
                <footer>
                    <p>All right reserved. Template by: <a href="http://webthemez.com">WebThemez</a></p>
                </footer>
            </div>
            <!-- /. PAGE INNER  -->
        </div>
        <!-- /. PAGE WRAPPER  -->
        <!-- /. WRAPPER  -->
        <!-- JS Scripts-->
        <!-- jQuery Js -->
        <script src="assets/js/jquery-1.10.2.js"></script>
        <!-- Bootstrap Js -->
        <script src="assets/js/bootstrap.min.js"></script>
        <!-- Metis Menu Js -->
        <script src="assets/js/jquery.metisMenu.js"></script>
        <!-- DATA TABLE SCRIPTS -->
        <script src="assets/js/dataTables/jquery.dataTables.js"></script>
        <script src="assets/js/dataTables/dataTables.bootstrap.js"></script>
        <script>
            $(document).ready(function () {

                $('#td-input1').html('<input type="text" placeholder="Search ' + $('#td-input1').text() + '" />');
                $('#td-input2').html('<input type="text" placeholder="Search ' + $('#td-input2').text() + '" />');

                $('#mytable').dataTable({
                    "ordering": false,
                    "searching": false,
                });

                var dataTable = $('#mytable').DataTable();

                $('input', '#td-input1').on('keyup change', function () {
                    // if (that.search() !== this.value) {
                    //     that
                    //         .search(this.value)
                    //         .draw();
                    // }
                });

                $('input', '#td-input2').on('keyup change', function () {
                    // if (that.search() !== this.value) {
                    //     that
                    //         .search(this.value)
                    //         .draw();
                    // }
                });

                // $("#mytable #checkall").click(function () {
                //     if ($("#mytable #checkall").is(':checked')) {
                //         $("#mytable input[type=checkbox]").each(function () {
                //             $(this).prop("checked", true);
                //         });

                //     } else {
                //         $("#mytable input[type=checkbox]").each(function () {
                //             $(this).prop("checked", false);
                //         });
                //     }
                // });

                // $("[data-toggle=tooltip]").tooltip();

                $("#delete").on("show.bs.modal", function (e) {
                    buttonId = $(e.relatedTarget).data("id");

                    var tr = $("#mytable tr td button.btn-danger[data-id=" + buttonId + "]").parents('tr')
                    var titlePlaceholder = tr.find('td:first-child').text();

                    $('#dp-title').html("<strong>名称</strong>：[" + titlePlaceholder + "]")
                });

                $("#edit").on("show.bs.modal", function (e) {
                    buttonId = $(e.relatedTarget).data("id");

                    var tr = $("#mytable tr td button.btn-primary[data-id=" + buttonId + "]").parents('tr')
                    var titlePlaceholder = tr.find('td:first-child').text();
                    var descPlaceholder = tr.find('td:nth-child(2)').text();

                    $('#edit-title').attr('placeholder', titlePlaceholder)
                    $('#edit-description').attr('placeholder', descPlaceholder)
                    $('#edit-title')[0].value = titlePlaceholder
                    $('#edit-description')[0].value = descPlaceholder

                });

                $("#confirm-insert").click(function () {
                    var title = $("#insert-title")[0].value.trim();
                    var description = $("#insert-description")[0].value.trim();

                    if (title.length > 0) {
                        doInsertRow($("#mytbody"), title, description);
                        // $('#mytable').DataTable().draw
                    } else {
                        alert("知识元名称为空，插入失败");
                    }

                    $("#insert-title")[0].value = "";
                    $("#insert-description")[0].value = "";
                });

                $("#confirm-delete").click(function () {
                    //console.log("hello");
                    //console.log(buttonId);
                    var tr = $("#mytable tr td button.btn-danger[data-id=" + buttonId + "]").parents('tr');
                    //console.log(tr.html());
                    doDelRow(tr);
                });

                $("#confirm-update").click(function () {
                    var tr = $("#mytable tr td button.btn-primary[data-id=" + buttonId + "]").parents('tr')

                    var title = $("#edit-title")[0].value.trim();
                    var description = $("#edit-description")[0].value.trim();
                    // console.log(title);
                    // console.log(description);

                    if ($('#edit-title').attr('placeholder') == title
                        && $('#edit-description').attr('placeholder') == description) {
                        // console.log('no change');                
                    } else {
                        // console.log('changed');                
                        doUpdateRow(tr, title, description);
                    }

                });

                $('#tr-input').hide();

                $('#my-btn-filter').click(function () {
                    $('#tr-input').toggle();
                    
                    var disp = $('#my-btn-filter span:last-child').text();
                    if (disp == '筛选') {
                        disp = '取消筛选';
                    } else {
                        disp = '筛选';
                    }
                    $('#my-btn-filter span:last-child').text(disp);
                });

            });
        </script>
        <!-- Custom Js -->
        <script src="assets/js/custom-scripts.js"></script>
        <script src="assets/js/gstore-table.js"></script>


</body>

</html>